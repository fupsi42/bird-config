# Gitoyen <contact@gitoyen.net>
#
# vim: set ts=4:sw=4


#
# Default configuration for all bgp templates
#
template bgp tpl_bgp {
        # Use MED for routes received by different ASes
        med metric;
}


#
# iBGP (Backbone)
#
template bgp ibgp from tpl_bgp {
	direct;
	gateway direct;
	local as 20766;
	next hop self;
	import where bgp_import(20766,"core",0,100);
	export where bgp_export(20766,"core");
}

protocol bgp core_xray from ibgp {
        description "X-Ray - iBGP";
	neighbor 80.67.168.4 as 20766;
}
protocol bgp core_vodka from ibgp {
        description "Vodka - iBGP";
        neighbor 80.67.168.7 as 20766;
}


#
# Member: FDN
#
template bgp tpl_fdn from tpl_bgp {
	local as 20766;
	description "Livraison FDN";
        import where bgp_import(65055,"member",50000,500);
        export where bgp_export(65055,"default");
}

protocol bgp membre_fdn1 from tpl_fdn {
	neighbor 80.67.168.213 as 65055;
}
protocol bgp membre_fdn2 from tpl_fdn {
	neighbor 80.67.168.214 as 65055;
}

#
# Member: Lorraine Data Network
#
template bgp tpl_ldn from tpl_bgp {
       local as 20766;
       description "Livraison Lorraine Data Network";
        import where bgp_import(60197,"member",40000,500);
        export where bgp_export(60197,"full");
}

protocol bgp member_ldn1 from tpl_ldn {
       # cannibalon
       neighbor 80.67.168.197 as 60197;
}
protocol bgp member_ldn2 from tpl_ldn {
       # eternium
       neighbor 80.67.168.198 as 60197;
}

#
# Member: Neutrinet
#
template bgp tpl_neutrinet from tpl_bgp {
	local as 20766;
	description "Livraison Neutrinet";
        import where bgp_import(204059,"member",40000,500);
        export where bgp_export(204059,"members");
}

protocol bgp member_neutrinet from tpl_neutrinet {
	neighbor 80.67.168.238 as 204059;
}

#
# Transit: Absolight
#
template bgp tpl_absolight from tpl_bgp {
	local as 20766;
	description "Transit Absolight";
        import where bgp_import(29608,"transit",10004,500);
        export where bgp_export(29608,"members");
}

protocol bgp transit_absolight from tpl_absolight {
	neighbor 79.143.245.137 as 29608;
	description "Transit Absolight";
}

#
# Transit: Ielo (th2)
#
template bgp tpl_ielo {
        local as 20766;
        description "Transit Ielo (th2)";
        import where bgp_import(29075,"transit",10003,500);
        export where bgp_export(29075,"members");
}

protocol bgp transit_ielo from tpl_ielo {
        neighbor 212.85.148.109 as 29075;
        description "Transit Ielo (th2)";
}

#
# Peering: Grenode
#
template bgp tpl_grenode from tpl_bgp {
	local as 20766;
	description "Peering Grenode";
	import where bgp_import(51083,"peering",30000,500);
        export where bgp_export(51083,"members");
}

protocol bgp peering_grenode1 from tpl_grenode {
	neighbor 80.67.168.222 as 51083;
}

#
# Peering : FranceIX
#
template bgp tpl_franceix_rs from tpl_bgp {
	local as 20766;
        import where bgp_import(51706,"peering",26000,210);
        export where bgp_export(51706,"members");
	import limit 100000;
}
template bgp tpl_franceix_peers from tpl_bgp {
	local as 20766;
        import where bgp_import(51706,"peering",26000,200);
        export where bgp_export(51706,"members");
	import limit 10000;
}


protocol bgp franceix_rs1 from tpl_franceix_rs {
	neighbor 37.49.236.250 as 51706;
	description "FranceIX Route Server 1";
}
protocol bgp franceix_rs2 from tpl_franceix_rs {
	neighbor 37.49.236.251 as 51706;
	description "FranceIX Route Server 2";
}
protocol bgp franceix_6939 from tpl_franceix_peers {
	neighbor 37.49.236.10 as 6939;
	description "FranceIX / AS-HURRICANE";
	import limit 500000;
}
protocol bgp franceix_20562 from tpl_franceix_peers {
	neighbor 37.49.236.68 as 20562;
	description "FranceIX / AS-OPENPEERING-EU";
}
protocol bgp franceix_34019 from tpl_franceix_peers {
	neighbor 37.49.236.71 as 34019;
	description "FranceIX / AS-HIVANE";
}
protocol bgp franceix_42473 from tpl_franceix_peers {
	neighbor 37.49.236.85 as 42473;
	description "FranceIX / AS-ANEXIA";
}
protocol bgp franceix_197692 from tpl_franceix_peers {
	neighbor 37.49.236.133 as 197692;
	description "FranceIX / AS-CONOSTIX";
}
protocol bgp franceix_29467 from tpl_franceix_peers {
	neighbor 37.49.236.227 as 29467;
	description "FranceIX / AS-LUXNETWORK";
}
protocol bgp franceix_197422 from tpl_franceix_peers {
	neighbor 37.49.236.233 as 197422;
	description "FranceIX / Tetaneutral";
}
protocol bgp franceix_13335 from tpl_franceix_peers {
	neighbor 37.49.237.49 as 13335;
	description "FranceIX / Cloudfare";
}
protocol bgp franceix_2484 from tpl_franceix_peers {
	neighbor 37.49.236.20 as 2484;
	description "FranceIX / AFNIC";
}
protocol bgp franceix_46489_1 from tpl_franceix_peers {
	neighbor 37.49.237.25 as 46489;
	description "FranceIX / Twitch";
}
protocol bgp franceix_46489_2 from tpl_franceix_peers {
	neighbor 37.49.237.26 as 46489;
	description "FranceIX / Twitch";
}
protocol bgp franceix_42 from tpl_franceix_peers {
	neighbor 37.49.236.92 as 42;
	description "FranceIX / AS-PCH";
}
protocol bgp franceix_3856 from tpl_franceix_peers {
	neighbor 37.49.236.91 as 3856;
	description "FranceIX / AS-PCH";
}
protocol bgp franceix_39405 from tpl_franceix_peers {
	neighbor 37.49.236.220 as 39405;
	description "FranceIX / FULLSAVE-AS";
}
protocol bgp franceix_21502 from tpl_franceix_peers {
	neighbor 37.49.236.7 as 21502;
	description "FranceIX / Numericable";
}

#
# Peering: EquinIX
#
# EquinIX: route collector (only for monitoring)
template bgp tpl_equinix_rc from tpl_bgp {
        local as 20766;
        import where bgp_import(65517,"peering",22000,310);
        export where bgp_export(65517,"members");
        import limit 10;
}

protocol bgp equinix_rc1 from tpl_equinix_rc {
        neighbor 195.42.144.250 as 65517;
        description "EquinIX Route Collector 1";
}

# EquinIX: Route server
template bgp tpl_equinix_rs from tpl_bgp {
        local as 20766;
        import where bgp_import(24115,"peering",22000,310);
        export where bgp_export(24115,"members");
	import limit 100000;
}
template bgp tpl_equinix_peers from tpl_bgp {
        local as 20766;
        import where bgp_import(24115,"peering",22000,300);
        export where bgp_export(24115,"members");
	import limit 100000;
}


protocol bgp equinix_rs1 from tpl_equinix_rs {
        neighbor 195.42.144.98 as 24115;
        description "EquinIX Route Server 1";
}
protocol bgp equinix_rs2 from tpl_equinix_rs {
        neighbor 195.42.144.99 as 24115;
        description "EquinIX Route Server 2";
}
protocol bgp equinix_6939 from tpl_equinix_peers {
	neighbor 195.42.144.104 as 6939;
	description "EquinIX / AS-HURRICANE";
	import limit 500000;
}
protocol bgp equinix_24990_1 from tpl_equinix_peers {
	neighbor 195.42.144.2 as 24990;
	description "EquinIX / AS-EQUINIX-EU 1";
	import limit 500;
}
protocol bgp equinix_24990_2 from tpl_equinix_peers {
	neighbor 195.42.145.2 as 24990;
	description "EquinIX / AS-EQUINIX-EU 2";
	import limit 500;
}
protocol bgp equinix_198507 from tpl_equinix_peers {
	neighbor 195.42.144.192 as 198507;
	description "EquinIX / AS-QUANTIC";
	import limit 50;
}
protocol bgp equinix_2486 from tpl_equinix_peers {
	neighbor 195.42.144.153 as 2486;
	description "EquinIX / AS-AFNIC";
	import limit 50;
}
protocol bgp equinix_43142 from tpl_equinix_peers {
	neighbor 195.42.144.219 as 43142;
	description "EquinIX / AS-Adelinovius";
	import limit 150;
}
protocol bgp equinix_49463 from tpl_equinix_peers {
	neighbor 195.42.145.115 as 49463;
	description "EquinIX / AS-LNCSA";
	import limit 50;
}
protocol bgp equinix_16276 from tpl_equinix_peers {
	neighbor 195.42.144.186 as 16276;
	description "EquinIX / AS-OVH";
	import limit 200;
}
protocol bgp equinix_4651 from tpl_equinix_peers {
	neighbor 195.42.144.36 as 4651;
	description "EquinIX / CAT TELECOM THIX";
	import limit 5000;
}
protocol bgp equinix_200780 from tpl_equinix_peers {
	neighbor 195.42.145.110 as 200780;
	description "EquinIX / APPLIWAVE";
	import limit 25;
}
